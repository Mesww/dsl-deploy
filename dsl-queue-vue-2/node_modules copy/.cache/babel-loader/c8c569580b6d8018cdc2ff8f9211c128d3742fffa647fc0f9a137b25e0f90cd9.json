{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-05354a64\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"bg\"\n};\nconst _hoisted_2 = {\n  class: \"raiting flex flex-col justify-center items-center\"\n};\nconst _hoisted_3 = {\n  class: \"rounded-md bg-white box mt-5 p-5 d-flex\"\n};\nconst _hoisted_4 = {\n  class: \"flex justify-between\"\n};\nconst _hoisted_5 = {\n  class: \"flex justify-center my-5\"\n};\nexport function render(_ctx, _cache) {\n  const _component_IncStudentsHeadersatis = _resolveComponent(\"IncStudentsHeadersatis\");\n  const _component_URange = _resolveComponent(\"URange\");\n  const _component_UButton = _resolveComponent(\"UButton\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_IncStudentsHeadersatis), _createElementVNode(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.selectedValue, (question, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"flex justify-center\",\n      key: index\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", null, [_createElementVNode(\"p\", null, _toDisplayString(index + 1) + \". \" + _toDisplayString(question.Question), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_URange, {\n      class: \"range\",\n      color: \"red\",\n      min: 1,\n      max: 5,\n      modelValue: _ctx.selectedValue[index].value,\n      \"onUpdate:modelValue\": $event => _ctx.selectedValue[index].value = $event\n    }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\"]), _createElementVNode(\"p\", null, _toDisplayString(_ctx.selectedValue[index].value), 1 /* TEXT */)])])])]);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_UButton, {\n    ui: {\n      rounded: 'rounded-full'\n    },\n    class: \"submitButton\",\n    icon: \"i-heroicons-arrow-right-circle-16-solid\",\n    onClick: _ctx.submit\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Submit\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_IncStudentsHeadersatis","_createElementVNode","_hoisted_2","_Fragment","_renderList","_ctx","selectedValue","question","index","key","_hoisted_3","_toDisplayString","Question","_hoisted_4","_component_URange","color","min","max","modelValue","value","$event","_hoisted_5","_component_UButton","ui","rounded","icon","onClick","submit","default","_withCtx","_createTextVNode","_"],"sources":["/home/worawut_kni/Work/dsl-queue-vue-2/src/pages/student/satisfaction.vue"],"sourcesContent":["<template>\n    <div class=\"bg\">\n      <IncStudentsHeadersatis />\n          <div class=\"raiting flex flex-col justify-center items-center\">\n              <div\n                class=\"flex justify-center\"\n                v-for=\"(question, index) in selectedValue\"\n                :key=\"index\"\n              >\n                <div class=\" rounded-md bg-white box mt-5 p-5 d-flex \">\n                  <div>\n                    <p>{{ index + 1 }}. {{ question.Question }}</p>\n                    <div class=\"flex justify-between \">\n                      <URange\n                        class=\"range\"\n                        color=\"red\"\n                        :min=\"1\"\n                        :max=\"5\"\n                        v-model=\"selectedValue[index].value\"\n                      />\n                      <p>{{ selectedValue[index].value }}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n          <div class=\"flex justify-center my-5 \">\n          <UButton\n              :ui=\"{ rounded: 'rounded-full' }\"\n              class=\"submitButton\"\n              icon=\"i-heroicons-arrow-right-circle-16-solid\"\n              @click=\"submit\"\n              >Submit</UButton\n            >\n          </div>\n  \n      </div>\n  \n    </div>\n  </template>\n  \n<!-- <script lang=\"ts\" setup>\n  import Swal from \"sweetalert2\";\n  import \"animate.css\";\n  \n  console.log(userid.value);\n  const {data:user} = await useFetch(`/api/user/user?userid=${userid.value}`);\n  console.log(user.value);\n  \n  \n  const studentID = user.value?.studentid;\n  const { data: myqueues, pending } = await useLazyAsyncData<{\n    queueid: number;\n    datetime: string;\n    studentID: string;\n    type: string;\n    orders: number;\n    channel: string;\n    status: string;\n    rate: number;\n    comment: string;\n  }>(\n    \"queue\",\n    () =>\n      $fetch(\"/api/queue/queueDataspecific\", {\n        method: \"post\",\n        body: {\n          studentID: studentID,\n        },\n      })\n  \n  );\n  \n  let selectedValue = ref([\n    { Question: \"โปรดให้คะแนนความพึงพอใจการให้บริการ\", value: 0 },\n  ]);\n  // console.log(value.model-value);\n  // import { IncStudentsRatingform } from '#build/components';\n  async function submit() {\n    // console.log('test');\n    console.log(selectedValue.value);\n    await Swal.fire({\n      icon: \"success\",\n      title: \"ขอบคุณที่มาใช้บริการ\",\n      showConfirmButton: false,\n      timer: 1500,\n      timerProgressBar: true,\n    })\n    await createHistory();\n    const res = await $fetch('/api/queue/queueDelete',{\n        method:\"DELETE\",\n        body:{\n          queueid: parseInt(myqueueid.value)\n        }\n      });\n      if (res === \"Delete!\") {\n        myqueueid.value = null;\n        is_reserve.value = null;\n        navigateTo(\"/student/\", { replace: true });\n      }\n  }\n  \n  async function createHistory() {\n    console.log(userid.value + myqueues.value.type + myqueues.value.rate + myqueues.value.comment + myqueues.value.channel);\n    try {\n      const response = await $fetch(\"/api/history/historyCreate\", {\n        method: \"post\",\n        body: { type: myqueues.value.type, studentid:myqueues.value.studentID, rate: myqueues.value.rate, comment: myqueues.value.comment, channel: myqueues.value.channel },\n      });\n      console.log(response);\n      if (response !== null ) {\n        console.log(response);\n        console.log(\"CREATED\");\n        // setData(\"is_reserve\", true);\n        // const queueid = useCookie('myqueueid');\n        // queueid.value = response.queueid;\n        // is_reserve.value = true;\n        // navigateTo(\"/student/main\", { replace: true });\n      } else {\n        throw Error(\"Connection error\");\n      }\n    } catch (error) {\n      console.error(error.message);\n    }\n  }\n  </script> -->\n  \n  <style lang=\"scss\" scoped>\n  .bg {\n    background-color: #191771;\n    height: 100vh;\n    overflow: scroll;\n  \n  }\n  .submitButton {\n    background-color: #f1f5f9;\n    color: #191771;\n    display: flex;\n    justify-content: center;\n    width: 80vw;\n  }\n  .submitButton:hover {\n    background-color: #ed1c24;\n    color: #f1f5f9;\n    overflow: hidden;\n  }\n  \n  .box {\n    width: 80vw;\n    color: #191771;\n    border-radius: 1.5rem;\n    .range {\n      margin-top: auto;\n      margin-bottom: auto;\n      width: 60vw;\n    }\n  }\n  </style>\n  "],"mappings":";;;EACSA,KAAK,EAAC;AAAI;;EAEJA,KAAK,EAAC;AAAmD;;EAMnDA,KAAK,EAAC;AAA2C;;EAG7CA,KAAK,EAAC;AAAuB;;EAavCA,KAAK,EAAC;AAA2B;;;;;uBAxB5CC,mBAAA,CAoCM,OApCNC,UAoCM,GAnCJC,YAAA,CAA0BC,iCAAA,GACtBC,mBAAA,CAgCE,OAhCFC,UAgCE,I,kBA/BEL,mBAAA,CAoBMM,SAAA,QAxBpBC,WAAA,CAM4CC,IAAA,CAAAC,aAAa,EANzD,CAMwBC,QAAQ,EAAEC,KAAK;yBAFzBX,mBAAA,CAoBM;MAnBJD,KAAK,EAAC,qBAAqB;MAE1Ba,GAAG,EAAED;QAENP,mBAAA,CAcM,OAdNS,UAcM,GAbJT,mBAAA,CAYM,cAXJA,mBAAA,CAA+C,WAAAU,gBAAA,CAAzCH,KAAK,QAAO,IAAE,GAAAG,gBAAA,CAAGJ,QAAQ,CAACK,QAAQ,kBACxCX,mBAAA,CASM,OATNY,UASM,GARJd,YAAA,CAMEe,iBAAA;MALAlB,KAAK,EAAC,OAAO;MACbmB,KAAK,EAAC,KAAK;MACVC,GAAG,EAAE,CAAC;MACNC,GAAG,EAAE,CAAC;MAjB/BC,UAAA,EAkBiCb,IAAA,CAAAC,aAAa,CAACE,KAAK,EAAEW,KAAK;MAlB3D,uBAAAC,MAAA,IAkBiCf,IAAA,CAAAC,aAAa,CAACE,KAAK,EAAEW,KAAK,GAAAC;oEAErCnB,mBAAA,CAAuC,WAAAU,gBAAA,CAAjCN,IAAA,CAAAC,aAAa,CAACE,KAAK,EAAEW,KAAK,iB;kCAK5ClB,mBAAA,CAQM,OARNoB,UAQM,GAPNtB,YAAA,CAMGuB,kBAAA;IALEC,EAAE,EAAE;MAAAC,OAAA;IAAA,CAA2B;IAChC5B,KAAK,EAAC,cAAc;IACpB6B,IAAI,EAAC,yCAAyC;IAC7CC,OAAK,EAAErB,IAAA,CAAAsB;;IA9BtBC,OAAA,EAAAC,QAAA,CA+Be,MAAM,CA/BrBC,gBAAA,CA+Be,QAAM,E;IA/BrBC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}