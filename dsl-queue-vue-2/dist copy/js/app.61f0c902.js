(function(){"use strict";var e={8635:function(e,t,a){var n=a(5130),o=a(6768),s=a(6450),l=a(8477);function c(e,t,a,n,c,r){const i=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(s.E,null,{default:(0,o.k6)((()=>[(0,o.bF)(l.Y,null,{default:(0,o.k6)((()=>[(0,o.bF)(i)])),_:1})])),_:1})}var r=(0,o.pM)({name:"App",data(){return{}}}),i=a(1241);const u=(0,i.A)(r,[["render",c]]);var d=u,h=(a(4979),a(1387)),p=(a(4114),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAAeCAYAAACyqDnLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACxSURBVHgB7drRCcIwEIfx0wkcTScwm+gmuoEjuFI3OC8EhNKWkvR/b98PDvr80ZCHnBn+3P0S84j5xlwNx0TEl8/dDeMi4MeXiDqqHnNfR9RREa8QVYyoCYiagKgJiJqAqAmImoCoCfainuqXQaUQVGs6G5Qm/lCtm6FPvXw2LqVi6ENMIWIKEVOImELEFCKmEDGFiCnk28/IxdDP2woOMVUi3pOYQt6Wxd7eVnKGlsV+A1ySXvu7ReIAAAAASUVORK5CYII="),f=a.p+"img/DSL-01.2cc15c6a.png",v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAeCAYAAADTsBuJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC7SURBVHgB7drBDcIwDIXhBxMwAiN1g7ICG3STjlA2gE0YxTjqCantARTbh/+TrNzfO0SJLP3AzAafxWf2uQhxPPDRvk1CjI3wm5fQ3074zSD0dRD+TeiL8BMRfiLCT0T4iQg/EeEnIvxEhJ/nZOtLdhFStALefl6FFGcfvpMTtQLuQq522e5cwqMQgxIKoIQCKKEASiiAEgqghAIooQBKKOCgBNZSouyU8BDibJQwC7FsXc59+kzGcu5fPqeJjFVGRHSfAAAAAElFTkSuQmCC",m=a(6726),g=a(4874),w=a.n(g),k=a(2807);const y={class:"me-4 mb-4"};var b=(0,o.pM)({__name:"index.logout.button",setup(e){const{cookies:t}=(0,m.lT)();async function a(){const{isConfirmed:e}=await w().fire({title:"คุณแน่ใจใช่ไหม?",text:"คุณกำลังจะออกจากระบบ!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#191771",cancelButtonColor:"#ED1C24",confirmButtonText:"ยืนยัน!",cancelButtonText:"ยกเลิก",iconColor:"#ED1C24",reverseButtons:!0,color:"#191771"});e&&(t.remove("accesstoken"),t.remove("refreshtoken"),Yn.push({name:"root",replace:!0}))}return(e,t)=>((0,o.uX)(),(0,o.CE)("div",y,[(0,o.bF)(k.D,{onClick:a,color:"red","prepend-icon":"mdi-logout",rounded:"xl",class:""},{default:(0,o.k6)((()=>[(0,o.eW)(" logout")])),_:1})]))}});const x=b;var C=x;const A={id:"navbar",class:"bg-white border rounded-b-3xl"},E=(0,o.Fv)('<div class="max-w-6xl mx-auto px-4 mt-10 mb-4" data-v-8b2c8d90><div class="flex justify-center" data-v-8b2c8d90><h1 class="textHeaders" data-v-8b2c8d90>ระบบจองคิว</h1></div><div class="flex justify-center" data-v-8b2c8d90><p class="text-red-600" data-v-8b2c8d90>กรุณามาให้ตรงเวลา</p></div><div class="flex justify-center" data-v-8b2c8d90><p class="text-red-600" data-v-8b2c8d90> ถ้าถึงคิวคุณแล้วไม่อยู่ ระบบจะถือว่าสละสิทธิ์ </p></div></div>',1),L=[E];function R(e,t){return(0,o.uX)(),(0,o.CE)("nav",A,L)}const T={},_=(0,i.A)(T,[["render",R],["__scopeId","data-v-8b2c8d90"]]);var I=_,S=a(8355),D=a(5126);const O=e=>((0,o.Qi)("data-v-9215bb02"),e=e(),(0,o.jt)(),e),F={class:"h-screen w-screen screen"},B={class:"flex justify-between"},q={class:"element-wrapper"},j=O((()=>(0,o.Lk)("div",{class:"text-wrapper-3 text-center"},"กดจองคิว",-1))),K=O((()=>(0,o.Lk)("div",null,null,-1))),X={class:"flex justify-end"};var N=(0,o.pM)({__name:"index",setup(e){const{cookies:t}=(0,m.lT)();async function a(){const{value:e}=await w().fire({title:"ยื่นยันคำขอ",reverseButtons:!0,input:"select",inputOptions:{ONE:"แบบคำขอกู้ยืมเงิน",TWO:"สัญญากู้ยืมเงิน หรือ แบบยืนยันการเบิกเงินกู้ยืม",OTHER:"ประเภทอื่น ๆ"},color:"#191771",confirmButtonColor:"#191771",cancelButtonColor:"#ED1C24",confirmButtonText:"ยืนยัน!",cancelButtonText:"ยกเลิก",inputPlaceholder:"โปรดเลือกการบริการ",showCancelButton:!0,inputValidator:e=>new Promise((t=>{e.match("ONE")||e.match("TWO")||e.match("OTHER")?t():t("ได้โปรดเลือกการบริการ :)")}))});e&&(console.log(e),await s(e))}async function n(e){try{const t=await S.A.post("http://localhost:8886/history/getHistoryCreate",{studentid:e.studentid,type:e.type,rate:0,channel:0,orders:e.orders,comment:"",status:"WAIT",queueid:e.queueid});if(200!==t.status)throw Error(t.statusText)}catch(t){console.error(t)}}async function s(e){const a=t.get("accesstoken"),o=l(a),s=o.email.split("@")[0];console.log(e+s);try{const t=await S.A.post("http://localhost:8886/queue/getqueueaddQueue",{type:e,studentID:s});if(console.log(t),200!==t.status)throw Error("Connection error");console.log(t.data),console.log("CREATED"),await n({studentid:s,type:e,orders:t.data.orders,queueid:t.data.queueid}),Yn.push({name:"studentmain",replace:!0})}catch(c){console.error(c)}}function l(e){var t=e.split(".")[1],a=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}return(e,t)=>((0,o.uX)(),(0,o.CE)("div",F,[(0,o.bF)(I),(0,o.Lk)("div",B,[(0,o.bF)(D.y,{class:"arrow",alt:"Arrow",src:p}),(0,o.Lk)("div",q,[(0,o.bF)(D.y,{id:"popupTrigger",class:"element",alt:"Element",src:f,onClick:a})]),(0,o.bF)(D.y,{class:"img",alt:"Arrow",src:v})]),j,K,(0,o.Lk)("div",X,[(0,o.bF)(C)])]))}});const P=(0,i.A)(N,[["__scopeId","data-v-9215bb02"]]);var Q=P,W=a(9103);const H={class:"grid h-screen bg-cover bg-scroll justify-center content-center",id:"backgroundlogin"},M={class:""},U={class:"flex justify-center"},V={class:"flex justify-center"};var G=(0,o.pM)({__name:"index",setup(e){const{cookies:t}=(0,m.lT)();console.log("8886");const a="104159606172-s0po212319hq48u8k9cn0cr6ga59pg7n.apps.googleusercontent.com";async function n(){(0,W.D4)((e=>{e.accounts.oauth2.initCodeClient({client_id:a,scope:"email profile openid",redirect_uri:"http://localhost:8886/auth/callback",callback:e=>{e.code&&s(e.code)}}).requestCode()}))}async function s(e){try{const a={Authorization:e},n=await S.A.post("http://localhost:8886/login/google",null,{headers:a}),o=n.data;console.log("token: ",o),t.set("accesstoken",o.access_token),t.set("refreshtoken",o.refresh_token);const s=await l(o.access_token);if(null===s||void 0===s)throw Error("Token not found");switch(s.role){case"STUDENT":Yn.push({name:"student",replace:!0});break;case"ADMIN":Yn.push({name:"adminhome",replace:!0});break;case"TEACHER":Yn.push({name:"teacherhome",replace:!0});break;default:throw Error("Role not found")}}catch(a){console.error("Failed to send authorization code:",a)}}function l(e){var t=e.split(".")[1],a=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}return(e,t)=>((0,o.uX)(),(0,o.CE)("div",H,[(0,o.Lk)("div",M,[(0,o.Lk)("div",U,[(0,o.bF)(D.y,{src:f,class:"element",cover:""})]),(0,o.Lk)("div",V,[(0,o.bF)(k.D,{"prepend-icon":"mdi-google",color:"red",onClick:n},{default:(0,o.k6)((()=>[(0,o.eW)(" Google")])),_:1})])])]))}});const $=(0,i.A)(G,[["__scopeId","data-v-23d47fda"]]);var J=$,Y=a(144),z=a(4232),Z=a.p+"img/dsl-logo.2cc15c6a.png";const ee=e=>((0,o.Qi)("data-v-eeeb10c4"),e=e(),(0,o.jt)(),e),te={id:"navbar",class:"bg-white border rounded-b-3xl"},ae={class:"max-w-6xl mx-auto px-4"},ne={class:"flex justify-between"},oe={class:"flex space-x-4"},se={href:"#",class:"flex items-center py-5 px-2 text-gray-700 hover:text-gray-900"},le=ee((()=>(0,o.Lk)("div",{class:"head hidden md:flex items-center space-x-1"},[(0,o.Lk)("h1",{class:"text py-5 px-3"}," บริการคิวออนไลน์ | ส่วนพัฒนานักศึกษา (ทุนเงินกู้ยืมเพื่อการศึกษา) ")],-1))),ce=ee((()=>(0,o.Lk)("div",{class:"head hidden md:flex items-center space-x-1"},null,-1))),re={class:"md:hidden flex items-center"},ie=ee((()=>(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,o.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16m-7 6h7"})],-1))),ue=[ie],de=ee((()=>(0,o.Lk)("div",{class:"head flex m-3"},[(0,o.Lk)("h1",{class:"text py-5 px-3"}," บริการคิวออนไลน์ | ส่วนพัฒนานักศึกษา (ทุนเงินกู้ยืมเพื่อการศึกษา) ")],-1))),he=[de];var pe=(0,o.pM)({__name:"navbar",setup(e){(0,Y.KR)(!1);let t=(0,Y.KR)(!0);return(e,a)=>((0,o.uX)(),(0,o.CE)("nav",te,[(0,o.Lk)("div",ae,[(0,o.Lk)("div",ne,[(0,o.Lk)("div",oe,[(0,o.Lk)("div",null,[(0,o.Lk)("a",se,[(0,o.bF)(D.y,{width:"50",src:Z})])]),le]),ce,(0,o.Lk)("div",re,[(0,o.Lk)("button",{onClick:a[0]||(a[0]=e=>(0,Y.i9)(t)?t.value=!(0,Y.R1)(t):t=!(0,Y.R1)(t)),class:"md:hidden"},ue)])])]),(0,o.Lk)("div",{class:(0,z.C4)(["md:hidden",(0,Y.R1)(t)?"block":"hidden"])},he,2)]))}});const fe=(0,i.A)(pe,[["__scopeId","data-v-eeeb10c4"]]);var ve=fe,me=a(9669);const ge=e=>((0,o.Qi)("data-v-22e9c7a4"),e=e(),(0,o.jt)(),e),we={class:"logo"},ke={class:"menu-toggle-wrap"},ye=ge((()=>(0,o.Lk)("h3",null,"Menu",-1))),be={class:"menu"},xe=ge((()=>(0,o.Lk)("span",{class:"text"},"แดชบอร์ด",-1))),Ce=ge((()=>(0,o.Lk)("span",{class:"text"},"รายงาน",-1))),Ae=ge((()=>(0,o.Lk)("span",{class:"text"},"คะแนนแบบประเมิน",-1))),Ee=ge((()=>(0,o.Lk)("span",{class:"text"},"เพิ่มเจ้าหน้าที่",-1))),Le=ge((()=>(0,o.Lk)("div",{class:"flex"},null,-1))),Re={class:"menu"},Te=ge((()=>(0,o.Lk)("span",{class:"text"},"Logout",-1)));var _e=(0,o.pM)({__name:"sidebar",setup(e){const{cookies:t}=(0,m.lT)(),a=(0,Y.KR)("true"===localStorage.getItem("is_expanded")),n=()=>{a.value=!a.value,localStorage.setItem("is_expanded",`${a.value}`)};function s(){w().fire({title:"คุณแน่ใจใช่ไหม?",text:"คุณกำลังจะออกจากระบบ!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#191771",cancelButtonColor:"#ED1C24",confirmButtonText:"ยืนยัน!",reverseButtons:!0,cancelButtonText:"ยกเลิก",iconColor:"#ED1C24",color:"#191771"}).then((e=>{e.isConfirmed&&(t.remove("accesstoken"),t.remove("refreshtoken"),Yn.push({name:"root",replace:!0}))}))}return(e,t)=>{const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("aside",{class:(0,z.C4)(""+(a.value?"is-expanded":""))},[(0,o.Lk)("div",we,[(0,o.bF)(D.y,{width:"50",src:Z,alt:"DSL"})]),(0,o.Lk)("div",ke,[(0,o.Lk)("button",{class:"menu-toggle",onClick:n},[(0,o.bF)(me.w,{class:"togglesidebar"},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-arrow-right-circle-outline")])),_:1})])]),ye,(0,o.Lk)("div",be,[(0,o.bF)(l,{to:"/admin/home",class:"button"},{default:(0,o.k6)((()=>[(0,o.bF)(me.w,{class:"iconsidebar"},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-home-circle-outline")])),_:1}),xe])),_:1}),(0,o.bF)(l,{to:"/admin/history",class:"button"},{default:(0,o.k6)((()=>[(0,o.bF)(me.w,{class:"iconsidebar"},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-history")])),_:1}),Ce])),_:1}),(0,o.bF)(l,{to:"/admin/score",class:"button"},{default:(0,o.k6)((()=>[(0,o.bF)(me.w,{class:"iconsidebar"},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-form-select")])),_:1}),Ae])),_:1}),(0,o.bF)(l,{to:"/admin/config",class:"button"},{default:(0,o.k6)((()=>[(0,o.bF)(me.w,{class:"iconsidebar"},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-plus")])),_:1}),Ee])),_:1})]),Le,(0,o.Lk)("div",Re,[(0,o.Lk)("div",{class:"button",onClick:t[0]||(t[0]=e=>s()),ref:"logoutLink"},[(0,o.bF)(me.w,{class:"iconsidebar"},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-logout")])),_:1}),Te],512)])],2)}}});const Ie=(0,i.A)(_e,[["__scopeId","data-v-22e9c7a4"]]);var Se=Ie;const De=e=>((0,o.Qi)("data-v-77242e88"),e=e(),(0,o.jt)(),e),Oe={class:"p-4 border rounded-t-3xl bg-white text-black text-center"},Fe=De((()=>(0,o.Lk)("p",{class:"text-sm text"},"MFU e-queue ส่วนพัฒนานักศึกษา",-1))),Be=De((()=>(0,o.Lk)("p",{class:"text"},"มหาวิทยาลัยแม่ฟ้าหลวง",-1))),qe=[Fe,Be];function je(e,t){return(0,o.uX)(),(0,o.CE)("footer",Oe,qe)}const Ke={},Xe=(0,i.A)(Ke,[["render",je],["__scopeId","data-v-77242e88"]]);var Ne=Xe;const Pe={class:"bg w-screen min-h-screen"},Qe={class:"flex"};var We=(0,o.pM)({__name:"index",setup(e){return(e,t)=>{const a=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",Pe,[(0,o.bF)(ve),(0,o.Lk)("div",Qe,[(0,o.bF)(Se),(0,o.bF)(a)]),(0,o.bF)(Ne)])}}});const He=We;var Me=He;const Ue=e=>((0,o.Qi)("data-v-588cb7c3"),e=e(),(0,o.jt)(),e),Ve={id:"navbar",class:"bg-white border rounded-b-3xl"},Ge={class:"max-w-6xl mx-auto px-4"},$e={class:"flex justify-between"},Je={class:"flex space-x-4"},Ye={href:"#",class:"flex items-center py-5 px-2 text-gray-700 hover:text-gray-900"},ze=Ue((()=>(0,o.Lk)("div",{class:"head hidden md:flex items-center space-x-1"},[(0,o.Lk)("h1",{class:"text py-5 px-3"}," บริการคิวออนไลน์ | ส่วนพัฒนานักศึกษา (ทุนเงินกู้ยืมเพื่อการศึกษา) ")],-1))),Ze=Ue((()=>(0,o.Lk)("div",{class:"md:hidden flex items-center"},null,-1))),et=Ue((()=>(0,o.Lk)("div",{class:"head flex m-3"},[(0,o.Lk)("h1",{class:"text py-5 px-3"}," บริการคิวออนไลน์ | ส่วนพัฒนานักศึกษา (ทุนเงินกู้ยืมเพื่อการศึกษา) ")],-1))),tt=[et];var at=(0,o.pM)({__name:"navbar",setup(e){(0,Y.KR)(!1);let t=(0,Y.KR)(!0),a=(0,Y.KR)(0);const{cookies:n}=(0,m.lT)(),s=n.get("accesstoken"),l=c(s);function c(e){var t=e.split(".")[1],a=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}async function r(){try{const e=await S.A.get(`http://localhost:8886/users/getSpecificuser?email=${l.email}`);if(200!==e.status)throw Error(e.statusText);a.value=e.data.channel,console.log("mychannel ",a)}catch(e){console.error(e)}}return(0,o.sV)(r),(e,a)=>((0,o.uX)(),(0,o.CE)("nav",Ve,[(0,o.Lk)("div",Ge,[(0,o.Lk)("div",$e,[(0,o.Lk)("div",Je,[(0,o.Lk)("div",null,[(0,o.Lk)("a",Ye,[(0,o.bF)(D.y,{width:"50",src:Z})])]),ze]),Ze])]),(0,o.Lk)("div",{class:(0,z.C4)(["md:hidden",(0,Y.R1)(t)?"block":"hidden"])},tt,2)]))}});const nt=(0,i.A)(at,[["__scopeId","data-v-588cb7c3"]]);var ot=nt;const st=e=>((0,o.Qi)("data-v-84616666"),e=e(),(0,o.jt)(),e),lt={class:"logo"},ct={class:"menu-toggle-wrap"},rt=st((()=>(0,o.Lk)("h3",null,"Menu",-1))),it={class:"menu"},ut=st((()=>(0,o.Lk)("span",{class:"text"},"เรียกคิว",-1))),dt=st((()=>(0,o.Lk)("span",{class:"text"},"แดชบอร์ด",-1))),ht=st((()=>(0,o.Lk)("div",{class:"flex"},null,-1))),pt={class:"menu"},ft=st((()=>(0,o.Lk)("span",{class:"text"},"Logout",-1)));var vt=(0,o.pM)({__name:"sidebar",setup(e){const{cookies:t}=(0,m.lT)(),a=(0,Y.KR)("true"===localStorage.getItem("is_expanded")),n=()=>{a.value=!a.value,localStorage.setItem("is_expanded",`${a.value}`)};function s(){w().fire({title:"คุณแน่ใจใช่ไหม?",text:"คุณกำลังจะออกจากระบบ!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#191771",cancelButtonColor:"#ED1C24",confirmButtonText:"ยืนยัน!",reverseButtons:!0,cancelButtonText:"ยกเลิก",iconColor:"#ED1C24",color:"#191771"}).then((e=>{e.isConfirmed&&(t.remove("accesstoken"),t.remove("refreshtoken"),Yn.push({name:"root",replace:!0}))}))}return(e,t)=>{const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("aside",{class:(0,z.C4)(""+(a.value?"is-expanded":""))},[(0,o.Lk)("div",lt,[(0,o.bF)(D.y,{width:"50",src:Z,alt:"DSL"})]),(0,o.Lk)("div",ct,[(0,o.Lk)("button",{class:"menu-toggle",onClick:n},[(0,o.bF)(me.w,{class:"togglesidebar"},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-arrow-right-circle-outline")])),_:1})])]),rt,(0,o.Lk)("div",it,[(0,o.bF)(l,{to:"/teacher/home",class:"button"},{default:(0,o.k6)((()=>[(0,o.bF)(me.w,{class:"iconsidebar"},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-home-circle-outline")])),_:1}),ut])),_:1}),(0,o.bF)(l,{to:"/teacher/dashboard",class:"button"},{default:(0,o.k6)((()=>[(0,o.bF)(me.w,{class:"iconsidebar"},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-chart-box-outline")])),_:1}),dt])),_:1})]),ht,(0,o.Lk)("div",pt,[(0,o.Lk)("div",{class:"button",onClick:t[0]||(t[0]=e=>s()),ref:"logoutLink"},[(0,o.bF)(me.w,{class:"iconsidebar"},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-logout")])),_:1}),ft],512)])],2)}}});const mt=(0,i.A)(vt,[["__scopeId","data-v-84616666"]]);var gt=mt;const wt=e=>((0,o.Qi)("data-v-0320a34f"),e=e(),(0,o.jt)(),e),kt={class:"p-4 border rounded-t-3xl bg-white text-black text-center"},yt=wt((()=>(0,o.Lk)("p",{class:"text-sm text"},"MFU e-queue ส่วนพัฒนานักศึกษา",-1))),bt=wt((()=>(0,o.Lk)("p",{class:"text"},"มหาวิทยาลัยแม่ฟ้าหลวง",-1))),xt=[yt,bt];function Ct(e,t){return(0,o.uX)(),(0,o.CE)("footer",kt,xt)}const At={},Et=(0,i.A)(At,[["render",Ct],["__scopeId","data-v-0320a34f"]]);var Lt=Et;const Rt={class:"bg w-screen min-h-screen"},Tt={class:"flex"};var _t=(0,o.pM)({__name:"index",setup(e){return(e,t)=>{const a=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",Rt,[(0,o.bF)(ot),(0,o.Lk)("div",Tt,[(0,o.bF)(gt),(0,o.bF)(a)]),(0,o.bF)(Lt)])}}});const It=_t;var St=It,Dt=a(771);const Ot=(0,o.Lk)("div",{class:"flex"},[(0,o.Lk)("h1",{class:"font-bold text-white mr-2"},"มีคิวที่รอเกิน "),(0,o.Lk)("h1",{class:"font-bold text-red-500 mr-2"},"10"),(0,o.Lk)("h1",{class:"font-bold text-white"},"นาทีแล้ว")],-1);var Ft=(0,o.pM)({__name:"home.table",setup(e){let t=6e5;const{cookies:a}=(0,m.lT)();let n=(0,Y.KR)(0),s=(0,Y.KR)(0),l=((0,Y.KR)(!1),(0,Y.KR)([]));const c=(0,Y.KR)(5);let r=(0,Y.KR)(!1),i=5e3,u=(0,Y.KR)(!1);const d=a.get("accesstoken"),h=p(d);function p(e){var t=e.split(".")[1],a=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}async function f(){try{const e=await S.A.get(`http://localhost:8886/users/getSpecificuser?email=${h.email}`);if(200!==e.status)throw Error(e.statusText);n.value=e.data.channel,console.log("mychannel ",n)}catch(e){console.error(e)}}setInterval((()=>{y()}),i);const v=[{key:"orders",title:"ลำดับ",align:"center"},{key:"datetime",title:"วันเวลา",align:"center"},{key:"type",title:"งานบริการ",align:"center"},{key:"studentID",title:"รหัสนักศึกษา",align:"center"},{key:"channel",title:"ช่องบริการ",align:"center"},{key:"actions",title:"งานบริการ",align:"center"}];y(),console.log("8886");let g=[];async function y(){try{const e=await S.A.get("http://localhost:8886/queue/getqueueDataspecificstatusrefuse?status1=FINISH&status2=SKIP&status3=CANCEL");if(200!==e.status)throw Error(`${e.status}`);{s.value=await e.data.length,l.value=await e.data;let a=[];if(l.value.forEach((e=>{e.type=x(e.type),"WAIT"===e.status&&a.push(e),e.datetime=`${new Date(e.datetime).toDateString()} ${new Date(e.datetime).toTimeString().split(" ")[0]}  `})),g=a,console.log(g),g.length>=1){console.log(g);const e=new Date(g[0].datetime).getTime();console.log((new Date).getTime()>e+t),(new Date).getTime()>e+t?u.value=!0:u.value=!1}else u.value=!1;r.value=!0,console.log("allqueue : ",e.data.length)}}catch(e){console.error(e)}finally{r.value=!1}}async function b(e,t){try{const a=await S.A.put("http://localhost:8886/history/getHistoryUpdate",{queueid:e,status:t,channel:n.value});if(200!==a.status)throw Error(a.statusText)}catch(a){console.error(a)}}function x(e){switch(e){case"ONE":return"แบบคำขอกู้ยืมเงิน";case"TWO":return"สัญญากู้ยืมเงิน หรือ แบบยืนยันการเบิกเงินกู้ยืม";default:return"ประเภทอื่น ๆ"}}async function C(e){console.log("Updated options:",e),await y()}async function A(){try{const e=await S.A.get(`http://localhost:8886/queue/getQueueSpecific?channel=${n.value}&status=PROCESS`);if(200===e.status)return console.log(e.data),console.log(e.data.length),e.data.length>=1;throw Error(e.statusText)}catch(e){console.error(e)}}async function E(e){console.log(e.queueid),console.log(n);const t=await A();if(t)console.log(t),w().fire("โปรดทำคิวปัจจุบันให้เสร็จสิ้นก่อน");else try{const t=await S.A.put("http://localhost:8886/queue/getqueueupdateQueuechannel",{queueid:e.queueid,channel:n.value});if(200!==t.status)throw Error(t.statusText);{await b(e.queueid,"PROCESS");const t=l.value?.findIndex((t=>t.queueid===e.queueid))??-1;console.log("success"),l.value&&-1!==t&&(l.value[t].channel=n.value)}}catch(a){console.error(a)}}async function L(e){console.log(e.queueid);await A();try{const t=await S.A.put("http://localhost:8886/queue/getqueueUpdatestatus",{queueid:e.queueid,status:"SKIP"});if(200!==t.status)throw Error(t.statusText);await b(e.queueid,"SKIP"),console.log("put OK"),console.log(await A()),await y()}catch(t){console.error(t)}}async function R(e){console.log(e);try{const t=await S.A.put("http://localhost:8886/queue/getqueueUpdatestatus",{queueid:e.queueid,status:"FINISH"});if(200!==t.status)throw Error(t.statusText);console.log("put OK"),await b(e.queueid,"FINISH"),await y()}catch(t){console.error(t)}}return console.log(l.value),(0,o.sV)(f),(0,o.sV)(y),(e,t)=>{const a=(0,o.g2)("marquee");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,Y.R1)(u)?((0,o.uX)(),(0,o.Wv)(a,{key:0,behavior:"scroll",direction:"right"},{default:(0,o.k6)((()=>[Ot])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(Dt.u,{"items-per-page":c.value,"onUpdate:itemsPerPage":t[0]||(t[0]=e=>c.value=e),headers:v,items:(0,Y.R1)(l),"items-length":(0,Y.R1)(s),loading:(0,Y.R1)(r),"onUpdate:options":C,style:{width:"80vw",height:"70vh"},class:"mb-10"},{"item.actions":(0,o.k6)((({item:e})=>[(0,o.bF)(k.D,{class:"me-2",size:"small",color:"blue",onClick:t=>E(e),"prepend-icon":"mdi-room-service-outline"},{default:(0,o.k6)((()=>[(0,o.eW)(" เรียก ")])),_:2},1032,["onClick"]),(0,o.bF)(k.D,{class:"me-2",size:"small",color:"red","prepend-icon":"mdi-cancel",onClick:t=>L(e)},{default:(0,o.k6)((()=>[(0,o.eW)(" ข้าม ")])),_:2},1032,["onClick"]),(0,o.bF)(k.D,{size:"small",color:"green",onClick:t=>R(e),"prepend-icon":"mdi-account-check-outline"},{default:(0,o.k6)((()=>[(0,o.eW)(" เสร็จสิ้น ")])),_:2},1032,["onClick"])])),_:1},8,["items-per-page","items","items-length","loading"])],64)}}});const Bt=Ft;var qt=Bt,jt=a(594);const Kt=e=>((0,o.Qi)("data-v-bfe90476"),e=e(),(0,o.jt)(),e),Xt={class:"m-auto"},Nt={class:"flex justify-between"},Pt={class:"flex"},Qt=Kt((()=>(0,o.Lk)("h1",{class:"text-red ml-5 mt-auto mb-auto"},"กดเพื่อพักระบบ",-1))),Wt={class:"head items-center md:flex"},Ht={class:"text-white py-5 px-3"};var Mt=(0,o.pM)({__name:"home",setup(e){let t=(0,Y.KR)(!0),a=5e3;setInterval((()=>{g()}),a);async function n(){const e=await d(),a=await h();if(!0===e)return t.value=!0,await w().fire({title:"มีคิวที่เรียกไว้แต่ยังไม่ได้สร็จสิ้น",icon:"warning",reverseButtons:!0,confirmButtonColor:"#191771",cancelButtonColor:"#ED1C24",confirmButtonText:"ยืนยัน!",iconColor:"#ED1C24",color:"#191771"});if(!1===a)return t.value=!0,await w().fire({title:"ยังไม่มีคิวให้พัก",icon:"warning",reverseButtons:!0,confirmButtonColor:"#191771",cancelButtonColor:"#ED1C24",confirmButtonText:"ยืนยัน!",iconColor:"#ED1C24",color:"#191771"});const n=await w().fire({title:"คุณแน่ใจใช่ไหม?",text:"คุณกำลังจะพักระบบ!",icon:"warning",reverseButtons:!0,showCancelButton:!0,confirmButtonColor:"#191771",cancelButtonColor:"#ED1C24",confirmButtonText:"ยืนยัน!",cancelButtonText:"ยกเลิก",iconColor:"#ED1C24",color:"#191771"});if(n.isConfirmed)try{const e=await S.A.put("http://localhost:8886/queue/getqueueupdateAllQueuestatus",{changeStatus:"WAIT",status:"STOP"});if(200!==e.status)throw Error(e.statusText);t.value=!1,f="STOP",await p()}catch(o){console.error(o)}t.value=!0,console.log(t.value)}let s=(0,Y.KR)(0);const{cookies:l}=(0,m.lT)(),c=l.get("accesstoken"),r=i(c);function i(e){var t=e.split(".")[1],a=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}async function u(){try{const e=await S.A.get(`http://localhost:8886/users/getSpecificuser?email=${r.email}`);if(200!==e.status)throw Error(e.statusText);s.value=e.data.channel,console.log("mychannel ",s)}catch(e){console.error(e)}}async function d(){try{const e=await S.A.get("http://localhost:8886/queue/getqueueSpecificstatus?status=PROCESS");if(200===e.status)return console.log(e.data),console.log(e.data.length),e.data.length>=1;throw Error(e.statusText)}catch(e){console.error(e)}}async function h(){try{const e=await S.A.get("http://localhost:8886/queue/getqueueSpecificstatus?status=WAIT");if(200===e.status)return console.log(e.data),console.log(e.data.length),e.data.length>=1;throw Error(e.statusText)}catch(e){console.error(e)}}async function p(){const e=await w().fire({title:"กำลังพักระบบ!",html:'<div class="spin-loader"></div>',showCancelButton:!0,showConfirmButton:!1,reverseButtons:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,customClass:{htmlContainer:"spin-swal-container"},showClass:{popup:"\n      animate__animated\n      animate__fadeInDown\n      animate__faster\n    "},hideClass:{popup:"\n      animate__animated\n      animate__fadeOutUp\n      animate__faster\n    "},cancelButtonText:"ยกเลิก",cancelButtonColor:"#ED1C24",color:"#191771"});if(e.dismiss||e.isDenied){t.value=!0;try{const e=await S.A.put("http://localhost:8886/queue/getqueueupdateAllQueuestatus",{changeStatus:"STOP",status:"WAIT"});200!==e.status&&(console.error(e.statusText),f="")}catch(a){console.error(a)}}}let f="";async function v(e){console.log("newStatus : "+e),console.log("exitingstatus : "+f),e!==f&&("STOP"===e?(await p(),f="STOP",t.value=!1):(w().clickCancel(),f="",t.value=!0))}async function g(){try{const e=await S.A.get("http://localhost:8886/queue/getqueueSpecificstatus?status=STOP");if(200!==e.status)throw Error(e.statusText);console.log(e.data),console.log(e.data.length),e.data.length>=1?(console.log("stop"),v("STOP")):v("")}catch(e){console.error(e)}}return(0,o.sV)(u),(0,o.sV)(g),(e,a)=>((0,o.uX)(),(0,o.CE)("div",Xt,[(0,o.Lk)("div",Nt,[(0,o.Lk)("div",Pt,[(0,o.bF)(jt.N,{color:"red",onClick:n,modelValue:(0,Y.R1)(t),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,Y.i9)(t)?t.value=e:t=e),"hide-details":""},null,8,["modelValue"]),Qt]),(0,o.Lk)("div",Wt,[(0,o.Lk)("h1",Ht," ช่องบริการที่ "+(0,z.v_)((0,Y.R1)(s)),1)])]),(0,o.bF)(qt)]))}});const Ut=(0,i.A)(Mt,[["__scopeId","data-v-bfe90476"]]);var Vt=Ut,Gt=a(8738);const $t={class:"appdashboard"},Jt={key:0,class:"containers"},Yt={class:"channel-wrapper"},zt={class:"textchannel"},Zt={class:"blockchannel"},ea={class:"textchannel"},ta={class:"box-right"},aa={class:"box-inside"},na={class:"channel-text"},oa={class:"q-text"},sa={key:1,class:"containers"},la={key:2,class:"text-250"};var ca=(0,o.pM)({__name:"dashboard",setup(e){let t=(0,Y.KR)([]),a=(0,Y.KR)([{channel:0,orders:0}]),n=(0,Y.KR)([]),s="",l=(0,Y.KR)(0),c=(0,Y.KR)(0),r=(0,Y.KR)(!1);let i=[];async function u(){try{const e=await S.A.get("http://localhost:8886/users/getAlluser");if(200!==e.status)throw Error(e.statusText);t.value=e.data.filter((e=>"TEACHER"===e.role)),console.log(t.value)}catch(e){console.error(e)}}async function d(){try{const e=await S.A.get("http://localhost:8886/queue/getqueueDataspecificstatusrefuse?status1=FINISH&status2=SKIP&status3=CANCEL");if(200!==e.status)throw Error(e.statusText);c.value=e.data.length-1;console.log(c.value),t.value.forEach((t=>{console.log("Teacher ",t.channel),e.data.forEach((t=>{console.log("Queue ",t.channel);let a=e.data.findLast((e=>"PROCESS"===e.status));void 0!==a&&null!==a&&(console.log(a?.channel),s=a.channel,l.value=a.orders)}))})),n.value=e.data,console.log(r.value),a.value.length>0&&(r.value=!0),console.log("channel : ",a.value)}catch(e){console.error(e)}}function h(e){const t=n.value.filter((t=>t.channel===e&&"PROCESS"===t.status));return void 0===t[0]?0:(console.log(t),t[0].orders)}return t.value.forEach((e=>{i=a.value.filter((t=>t.channel===e.channel))})),console.log(i),(0,o.sV)(d),(0,o.sV)(u),setInterval(d,5e3),(e,a)=>{const n=(0,o.g2)("IncTeacherSidebardark");return(0,o.uX)(),(0,o.CE)("div",$t,[(0,o.bF)(n),(0,o.Lk)("main",null,[(0,Y.R1)(r)?((0,o.uX)(),(0,o.CE)("div",Jt,[(0,o.Lk)("div",Yt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,Y.R1)(t),((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"channel"},[(0,o.Lk)("div",zt," ช่องรับบริการที่ "+(0,z.v_)(e.channel),1),(0,o.Lk)("div",Zt,[(0,o.bF)(me.w,{icon:"mdi-account-tie",class:"mb-10",style:{"font-size":"6rem"},color:"white",alt:"Ellipse"}),(0,o.bF)(me.w,{icon:"mdi-account",style:{"font-size":"4rem"},color:"white",alt:"Ellipse"}),(0,o.Lk)("div",ea,(0,z.v_)(h(e.channel)),1)])])))),128))]),(0,o.Lk)("div",ta,[(0,o.Lk)("div",aa,[(0,o.Lk)("h1",na,"ช่องรับบริการที่ "+(0,z.v_)((0,Y.R1)(s)),1)]),(0,o.Lk)("h1",oa,"คิวที่ "+(0,z.v_)((0,Y.R1)(l)),1)])])):!1===(0,Y.R1)(r)?((0,o.uX)(),(0,o.CE)("div",sa,[(0,o.bF)(Gt.V8,{class:"mx-auto border","max-width":"300",type:"card-avatar, actions"})])):(0,o.Q3)("",!0),(0,Y.R1)(c)>=250?((0,o.uX)(),(0,o.CE)("div",la," จำนวนผู้ใช้บริการเกินกว่า 250 ท่าน ")):(0,o.Q3)("",!0)])])}}});const ra=(0,i.A)(ca,[["__scopeId","data-v-b19ca7f6"]]);var ia=ra,ua="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAB4CAYAAAAT1Md9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZGSURBVHgB7Z15qFVFHMe/LUSKbWabVj41pCxssZWi96iozGijIiJa/qqQaF+gIqOIiohohYiilbLNCMPI8I9AMywzNEyr915lVkqLJrm/ft83c7rXxz3vvnvuvM6Ze74f+DLX49zF+TpzZub3m3sBIYQQQgghhBBCCCGEEEIIIYJyv6kncnWa2hCAHREX35luQNzcZ7rO9CdKAnvcl4ift0wvoEm2h4gSGRcpMi5SZFykyLhIkXGRIuMiRcZFioyLFBkXKTIuUmRcpMi4SJFxkRJTPO49uHicQDw9brhpB9P7EL0U2bihpimmGaZfTPNMq0wLTXeajoEoFOxdNGYp6udwLDA9aDoK8RAkAl4kOkwvmjYhWyIO739PmY5HsWkJ43Y3XW9aibDZVCtMz5lOg7s3FolojeN99WTT86Y1GPyUuG7TdNPppp2RP4U3rsO0f59rE0yfYfDNStPvpjf858iLQht3KVxDLau6dplpC/IzrVrs6YciHwqbnreP6VH/+HNfXgk3NGZ5PyaOPgTXSybDLcR/RXPsYnoAYhueBP5Ltx5tGm/6G9l6xiOm7fzrnmE60z/mjg9NfALZJzbfIh8KOVSOMa2Ga5ip/toXyD6kfYSKcf1lMnP2+Iypq4HX/hT5EMS40HuVNGtPuHsbG/Ji05EDeB4bcq5plmmR6Te4afww026on2c/24scZ7oIroce1s9zXoLohf8JfoQz4TZ/rV5v2wo3VR/v648yXWC63XSL6Ry44ZaMNd2LxqBxPGSxpOo915seRn4UbqjkPYcNsxlu26od9afmU/xz2VMX9VOX219XoLnJ1AjTsXCL/jwpnHGcSLCRP/Z/fhvpRnSZxsH1orkY+H2J5rYhbgq3HDjLl7N8mbbxuxaVnkaTT8DAmWiag/7vXaUglHFDTIf4x/NNk5DeM7gm48xzNrL1nja42ebeKDGhjJvoS974v0H6TJL7hlz43oPmhrx9TXehxIQy7gBfLofb1RibUo8LZs4gr0LzcEIzGiUllHHJPWe1Lw9Kqce10/kIs0vPz345Skoo44b7co0vx9SowzUeUw+mIBynoKSEnJyQdb7cq0adn3w5DuFoQ0lTDEP9o5Ots02+3KlGnY2+HIpwDEl5r5YnlHFb+rzexhp1dvXlOoSDQ/MGlJBQxq33ZTJkrqpRJ1l3rUA4OPz2oISEMi7ZvR/hy84adUaa9jO9g3B8iJISyrglvqQ5jJ9116jD60xfmAkXWG0W9vLpKCmhjFvoSxrH1IXlKfWuhYvVzUDzvI7aPVs0ACceyQ4+wzmTkL7DfxNcaGUJskfGO1GZ7MRGoaIDnN195R8fDpcktDKl7jTTwXBB0m40Dp/Tjspiv5SEXLwmcbhLfDknpR4zrN6E6zkdpq8xcBi7o2k/QASD8Tia8Q9c3kkH+h/uuCw4G27xzknLYvQfQL0azcH7L/NR8h5iC5nllaTK3QGX7DMf9e9Xr6CSczIabi/zZtOtcMaO9H/Hjey70RgT/Gdh6sNWVPJcpqGSPfZ/U0jjGGtj43DmyAhAktFcT2xMDoNMBmKO/4lwveM8VDawB/JFoxz6J/nPsbjOe05FPhTSOC7A/4JrmGvgGnIess8eP6l67TTj2HPaTY+bvm/gtRcgHwp7doCpCWwYxubYWxgd/wPZjOPQmMTumCd5YdX78J76NNxEJctrL0U+FNY4rtGSxnzNX2Ou5AZka+CfTY/B/QegWa/CRdl7mtQHyIdCn9ahUWycxVXXmF28Gc03eAhFf1pnMOHkYlSfa8wEY85+XoZxqcLjyiGDuY0S9VHidtPLyH6KpxHxGxuY68J75DDkT0ucAWeMjj+ewOVDSLN4aORZOLOKRst968KpcJMZRs+zmEXzOYk5CfktrgdCyxmXwHPjN6J+9IDpEtzY5vruCBTbrGpa1rgE7mFy++tdbLtdxU1pHsM6GvH9NhAp5MHGkHDpMNOLEQXuO3ah+fPfLUEsOYk84cPeNhmil5iSSc9F/D9BFgx90WikyLhIkXGRIuMiRcZFioyLFBkXKTIuUmRcpMi4SJFxkSLjIkXGRYqMi5TYIsh7wB0EiRmeg1+LJonNuAPRGr9otQxCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQIgj/ArObJjgc9mIcAAAAAElFTkSuQmCC";const da=e=>((0,o.Qi)("data-v-627022c3"),e=e(),(0,o.jt)(),e),ha={class:"screens"},pa={id:"navbar",class:"bg-white border rounded-b-3xl"},fa={class:"max-w-6xl mx-auto px-10 mt-12 mb-6"},va={class:"flex justify-between"},ma={class:"flex items-center"},ga={class:"textHeaders"},wa={class:"flex items-center"},ka=da((()=>(0,o.Lk)("span",{class:"i-heroicons-clock w-8 h-8 mr-3"},null,-1))),ya={key:0,class:"textHeaders"},ba={key:1,class:"textHeaders"},xa={class:"maincontent"},Ca=da((()=>(0,o.Lk)("div",{class:"text-wrapper-2 mt-5 mb-16"},[(0,o.eW)(" กรุณามาให้ตรงเวลา   "),(0,o.Lk)("br"),(0,o.eW)(" ถ้าถึงคิวคุณแล้วไม่อยู่ ระบบจะถือว่าสละสิทธิ์ ")],-1))),Aa={class:"channel-wrapper"},Ea={class:"textchannel"},La={class:"blockchannel"},Ra={class:"flex items-center"},Ta={key:0},_a={key:1},Ia={key:2},Sa={class:"flex justify-end"};var Da=(0,o.pM)({__name:"main",setup(e){const{cookies:t}=(0,m.lT)();(0,Y.KR)(0),(0,Y.KR)(0),(0,Y.KR)(0);let a=(0,Y.KR)(0),n=(0,Y.KR)(0),s=(0,Y.KR)(0),l=((0,Y.KR)(),(0,Y.KR)("")),c=(0,Y.KR)(0),r=3e3,i=(0,Y.KR)(!0),u=(0,Y.KR)([]),d=(0,Y.KR)([{channel:0,orders:0}]);function h(e){var t=e.split(".")[1],a=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}let p=setInterval((()=>{_(),A(),O(),i.value}),r);const f=t.get("accesstoken"),v=h(f),g=v.email.split("@")[0];async function y(){try{const e=await S.A.get("http://localhost:8886/users/getAlluser");if(200!==e.status)throw Error(e.statusText);u.value=e.data.filter((e=>"TEACHER"===e.role)),console.log(u.value)}catch(e){console.error(e)}}async function b(){try{const e=await S.A.get(`http://localhost:8886/queue/getQueueSpecific?studentID=${g}`);if(200!==e.status)throw Error(e.statusText);return e}catch(e){console.error(e)}}let x=(0,Y.KR)([]);async function C(){x.value=await b()}async function A(){try{console.log("studentID : ",g);const e=await b(),t=await T();console.log(e.data[0]),n.value=e.data[0].queueid,s.value=e.data[0].orders,console.log(e.data[0].queueid),console.log(e.data[0]),l.value=e.data[0].status,c.value=e.data[0].channel,!0===t&&"STOP"!==l.value&&(await E({queueid:n.value}),L="STOP"),console.log(a.value),console.log(`${l.value} ${c.value} `),R(l.value)}catch(e){console.error(e)}}async function E(e){console.log(e.queueid);try{const t=await S.A.put("http://localhost:8886/queue/getqueueUpdatestatus",{queueid:e.queueid,status:"STOP"});if(200!==t.status)throw Error(t.statusText);console.log("put OK")}catch(t){console.error(t)}}console.log(x.value);let L="WAIT";function R(e){5===a.value&&(e="CLOSET"),L!==e&&("FINISH"===e?B():"SKIP"===e?X():"PROCESS"===e?(q(`${c.value}`),L="PROCESS"):"STOP"===e?(K(),L="STOP"):5===a.value?(j(),L="CLOSET"):w().close())}async function T(){try{const e=await S.A.get("http://localhost:8886/queue/getqueueSpecificstatus?status=STOP");if(200===e.status)return console.log(e.data),console.log(e.data.length),e.data.length>=1;throw Error(e.statusText)}catch(e){console.error(e)}}async function _(){try{const e=await S.A.get("http://localhost:8886/queue/getqueueDataspecificstatusrefuse?status1=FINISH&status2=SKIP&status3=CANCEL");if(200!==e.status)throw Error(e.statusText);let t=[];u.value.forEach((a=>{console.log("Teacher ",a.channel),e.data.forEach((e=>{console.log("Queue ",e.channel),console.log("Teacher ",a.channel),e.channel===a.channel&&(console.log("queue channel ",e.channel),t.push({channel:e.channel,orders:e.orders}))}))})),d.value=t,console.log("Techerchannel",d.value),console.log(i.value),console.log(e)}catch(e){console.error(e)}}async function I(e,t){try{const a=await S.A.put("http://localhost:8886/history/getHistoryUpdate",{queueid:e,status:t});if(200!==a.status)throw Error(a.statusText)}catch(a){console.error(a)}}async function O(){try{const e=await S.A.get(`http://localhost:8886/queue/getqueueCountqueuebefore?queueidstring=${n.value}`);if(200!==e.status)throw Error(e.statusText);console.log("left queue: ",e.data),a.value=e.data.queuebefore-1}catch(e){console.error(e)}}async function F(){P(p);const e=await w().fire({title:"คุณแน่ใจใช่ไหม?",reverseButtons:!0,text:"คุณกำลังจะยกเลิกคิว!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#191771",cancelButtonColor:"#ED1C24",confirmButtonText:"ยืนยัน!",cancelButtonText:"ยกเลิก",iconColor:"#ED1C24",color:"#191771"});if(e.isConfirmed)try{const e=await S.A.delete(`http://localhost:8886/queue/getqueuedeleteQueue?queueid=${n.value}`);if(200===e.status)return await I(n.value,"CANCEL"),void Yn.push({name:"student",replace:!0});throw Error(e.statusText)}catch(t){console.error(t)}else N()}async function B(){P(p),await w().fire({reverseButtons:!0,color:"#191771",icon:"success",html:"<h1>สิ้นสุดการให้บริการ <br/> กรุณาทำแบบสอบถามในหน้าต่อไป</h1>",showConfirmButton:!1,timer:3500,timerProgressBar:!0}),Yn.push({name:"studentstatisfaction",replace:!0})}async function q(e){await w().fire({reverseButtons:!0,title:'<h1 class="text-xl">ถึงคิวของคุณแล้ว</h1>',icon:"warning",iconColor:"red",html:`\n\n      <div class="flex items-center justify-center">\n        <p class="mr-2">กรุณาไปที่ช่องบริการ </p>\n        <p class="mr-2 text-red-500 font-bold">${e}</p>\n      </div>\n    `,color:"#191771",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showConfirmButton:!1})}async function j(){await w().fire({reverseButtons:!0,title:'<h1 class="text-xl">จะถึงคิวของคุณแล้ว</h1>',html:'\n  <span class="i-heroicons-user-solid w-40 h-40 "></span>\n  <div class="flex items-center justify-center">\n              <span class="i-heroicons-clock w-8 h-8 mr-3"></span>\n              <p class="mr-2">เหลืออีก </p>\n              <p class="mr-2 text-red-500 font-bold"> 5 </p>\n              <p class="mr-2">คิว</p>\n            </div>\n  ',showConfirmButton:!1,color:"#191771"})}function K(){w().fire({reverseButtons:!0,title:'<h1 class="text-xl">กรุณารอสักครู่ <br/> อยู่ในช่วงพักของเจ้าหน้าที่</h1>',html:'<div class="custom-loaders"></div>\n          <p>จะกลับมาเปิดทำการในไม่ช้า</p>  \n    ',customClass:{htmlContainer:"custom-swal-container"},color:"#191771",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showConfirmButton:!1})}async function X(){P(p);const e=await w().fire({reverseButtons:!0,title:'<h1 class="text-xl">คิวของคุณผ่านไปแล้ว</h1>',html:'\n  <span class="i-heroicons-exclamation-triangle-solid w-40 h-40 text-red-600 "></span>\n  <div class="flex items-center justify-center">\n    <p>กดยืนยันเพื่อกลับไปหน้าแรก</p>\n    </div>\n    ',allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,confirmButtonText:'\n    <div class="flex items-center">\n      <span class="i-heroicons-arrow-uturn-left mr-1  "></span>\n      ยืนยัน\n      </div>\n  ',confirmButtonColor:"#191771",color:"#191771"});if(e.isConfirmed)try{const e=await S.A.delete(`http://localhost:8886/queue/getqueuedeleteQueue?queueid=${n.value}`);if(200===e.status)return void Yn.push({name:"student",replace:!0});throw Error(e.statusText)}catch(t){console.error(t)}}function N(){p=setInterval((()=>{A(),_(),O(),i.value}),r)}function P(e){clearInterval(e)}return(0,o.sV)(y),(0,o.sV)(_),(0,o.sV)(C),(0,o.sV)(A),(0,o.sV)(O),(e,t)=>((0,o.uX)(),(0,o.CE)("div",ha,[(0,o.Lk)("nav",pa,[(0,o.Lk)("div",fa,[(0,o.Lk)("div",va,[(0,o.Lk)("div",ma,[(0,o.Lk)("h1",ga,"คิวของคุณคือคิวที่ "+(0,z.v_)((0,Y.R1)(s)),1)]),(0,o.Lk)("div",wa,[ka,(0,Y.R1)(a)>=0?((0,o.uX)(),(0,o.CE)("h1",ya," เหลืออีก "+(0,z.v_)((0,Y.R1)(a))+" คิว ",1)):((0,o.uX)(),(0,o.CE)("h1",ba,"เหลืออีก 0 คิว"))])])])]),(0,o.Lk)("div",xa,[Ca,(0,o.Lk)("div",Aa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,Y.R1)(u),((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"channel"},[(0,o.Lk)("div",Ea,"ช่องรับบริการที่ "+(0,z.v_)(e.channel),1),(0,o.Lk)("div",La,[(0,o.bF)(D.y,{class:"",alt:"Ellipse",src:ua}),(0,o.Lk)("div",Ra,[(0,o.bF)(me.w,{icon:"mdi-account",size:"x-large",class:"mr-3"}),void 0===(0,Y.R1)(d)[t]||null===(0,Y.R1)(d)[t]?((0,o.uX)(),(0,o.CE)("p",Ta,(0,z.v_)(0))):void 0===(0,Y.R1)(d)[t].channel?((0,o.uX)(),(0,o.CE)("p",_a,"0")):(0,Y.R1)(d)[t].channel===e.channel?((0,o.uX)(),(0,o.CE)("p",Ia,(0,z.v_)((0,Y.R1)(d)[t].channel),1)):(0,o.Q3)("",!0)])])])))),128))]),(0,o.Lk)("div",Sa,[(0,o.bF)(k.D,{color:"red",class:"cancelbutton",onClick:F},{default:(0,o.k6)((()=>[(0,o.eW)("ยกเลิกคิว")])),_:1})])])]))}});const Oa=(0,i.A)(Da,[["__scopeId","data-v-627022c3"]]);var Fa=Oa;const Ba={id:"navbar",class:"bg-white border rounded-b-3xl"},qa=(0,o.Fv)('<div class="max-w-6xl mx-auto px-4 mt-10 mb-4" data-v-371f8acf><div class="flex justify-center" data-v-371f8acf><h1 class="textHeaderssatis" data-v-371f8acf>ประเมินการให้บริการ</h1></div><div class="flex justify-center" data-v-371f8acf><p class="text-green-600" data-v-371f8acf>ขอบคุณสำหรับการใช้บริการ</p></div></div>',1),ja=[qa];function Ka(e,t,a,n,s,l){return(0,o.uX)(),(0,o.CE)("nav",Ba,ja)}var Xa={};const Na=(0,i.A)(Xa,[["render",Ka],["__scopeId","data-v-371f8acf"]]);var Pa=Na;const Qa={class:"bg"},Wa={class:"raiting flex flex-col justify-center items-center"},Ha={class:"rounded-md bg-white box mt-5 p-5 d-flex"},Ma={class:"flex justify-between"},Ua={class:"flex justify-center my-5"};var Va=(0,o.pM)({__name:"satisfaction",setup(e){const{cookies:t}=(0,m.lT)(),a=t.get("accesstoken"),n=r(a),s=n.email.split("@")[0];let l=(0,Y.KR)([]),c=(0,Y.KR)([{Question:"โปรดให้คะแนนความพึงพอใจการให้บริการ",value:5}]);function r(e){var t=e.split(".")[1],a=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}async function i(){try{const e=await S.A.get(`http://localhost:8886/queue/getQueueSpecific?studentID=${s}`);if(200!==e.status)throw Error(e.statusText);l.value=e.data[0],console.log(l.value)}catch(e){console.error(e)}}async function u(){console.log(c.value),await w().fire({icon:"success",title:"ขอบคุณที่มาใช้บริการ",showConfirmButton:!1,timer:1500}),await d(l.value.queueid,c.value[0].value);try{const e=await S.A.delete(`http://localhost:8886/queue/getqueuedeleteQueue?queueid=${l.value.queueid}`);if(200!==e.status)throw Error(e.statusText);Yn.push({name:"student",replace:!0})}catch(e){console.error(e)}}async function d(e,t){try{const a=await S.A.put("http://localhost:8886/history/getHistoryUpdate",{queueid:e,rate:t});if(200!==a.status)throw Error(a.statusText)}catch(a){console.error(a)}}return(0,o.sV)(i),(e,t)=>((0,o.uX)(),(0,o.CE)("div",Qa,[(0,o.bF)(Pa),(0,o.Lk)("div",Wa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,Y.R1)(c),((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"flex justify-center",key:t},[(0,o.Lk)("div",Ha,[(0,o.Lk)("div",null,[(0,o.Lk)("p",null,(0,z.v_)(e.Question),1),(0,o.Lk)("div",Ma,[(0,o.Lk)("div",null,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(5,(t=>(0,o.bF)(me.w,{key:t,onClick:a=>e.value=t,color:t<=e.value?"yellow":"main"},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-star")])),_:2},1032,["onClick","color"]))),64))]),(0,o.Lk)("p",null,(0,z.v_)((0,Y.R1)(c)[t].value),1)])])])])))),128)),(0,o.Lk)("div",Ua,[(0,o.bF)(k.D,{rounded:"xl",class:"submitButton",icon:"i-heroicons-arrow-right-circle-16-solid",onClick:u},{default:(0,o.k6)((()=>[(0,o.eW)("Submit")])),_:1})])])]))}});const Ga=(0,i.A)(Va,[["__scopeId","data-v-9d2593d4"]]);var $a,Ja=Ga,Ya=a(1010),za=a(5524);(function(e){e[e["Bar"]=0]="Bar",e[e["Bubble"]=1]="Bubble",e[e["Doughnut"]=2]="Doughnut",e[e["Line"]=3]="Line",e[e["Pie"]=4]="Pie",e[e["PolarArea"]=5]="PolarArea",e[e["Radar"]=6]="Radar",e[e["Scatter"]=7]="Scatter"})($a||($a={}));var Za=a(6332);const en={class:"font-weight-black"},tn={class:"font-weight-black"},an={class:"font-weight-black"},nn={class:"font-weight-black"};var on=(0,o.pM)({__name:"home.content",props:{data:{type:Object,required:!0},cardColor:{type:String},chartOptions:{type:Object}},setup(e){za.t1.register(za.hE,za.m_,za.s$,za.E8,za.Bs,za.PP,za.UA,za.kc,za.FN,za.No);const t=e,a={responsive:!0};return(e,n)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[t.data.type===(0,Y.R1)($a).Bar?((0,o.uX)(),(0,o.Wv)(Za.J,{key:0,height:"500",width:"500"},{title:(0,o.k6)((()=>[(0,o.Lk)("span",en,(0,z.v_)(t.data.title),1)])),text:(0,o.k6)((()=>[(0,o.bF)((0,Y.R1)(Ya.yP),{id:e.$props.data.title,options:void 0===e.$props.data.chartOption?a:e.$props.data.chartOption,data:t.data},null,8,["id","options","data"])])),_:1})):(0,o.Q3)("",!0),t.data.type===(0,Y.R1)($a).Doughnut?((0,o.uX)(),(0,o.Wv)(Za.J,{key:1,height:"500",width:"500"},{title:(0,o.k6)((()=>[(0,o.Lk)("span",tn,(0,z.v_)(t.data.title),1)])),text:(0,o.k6)((()=>[(0,o.bF)((0,Y.R1)(Ya.nu),{id:e.$props.data.title,options:void 0===e.$props.data.chartOption?a:e.$props.data.chartOption,data:t.data},null,8,["id","options","data"])])),_:1})):(0,o.Q3)("",!0),t.data.type===(0,Y.R1)($a).Line?((0,o.uX)(),(0,o.Wv)(Za.J,{key:2,height:"500",width:"500"},{title:(0,o.k6)((()=>[(0,o.Lk)("span",an,(0,z.v_)(t.data.title),1)])),text:(0,o.k6)((()=>[(0,o.bF)((0,Y.R1)(Ya.N1),{id:e.$props.data.title,options:void 0===e.$props.data.chartOption?a:e.$props.data.chartOption,data:t.data},null,8,["id","options","data"])])),_:1})):(0,o.Q3)("",!0),t.data.type===(0,Y.R1)($a).Pie?((0,o.uX)(),(0,o.Wv)(Za.J,{key:3,height:"500",width:"500"},{title:(0,o.k6)((()=>[(0,o.Lk)("span",nn,(0,z.v_)(t.data.title),1)])),text:(0,o.k6)((()=>[(0,o.bF)((0,Y.R1)(Ya.Fq),{id:e.$props.data.title,options:void 0===e.$props.data.chartOption?a:e.$props.data.chartOption,data:t.data},null,8,["id","options","data"])])),_:1})):(0,o.Q3)("",!0)],64))}});const sn=on;var ln=sn;const cn={class:"flex justify-center w-screen main-wrapper"},rn={class:"grid grid-cols-2 gap-4"};var un=(0,o.pM)({__name:"home",setup(e){let t=(0,Y.KR)([]),a=new Date(Date.now()),n=(0,Y.KR)([]),s=(0,Y.KR)(!0),l=(0,Y.KR)([]),c=(0,Y.KR)([]),r=1e4;async function i(){try{const e=await S.A.get("http://localhost:8886/history/getHistory");if(200!==e.status)throw Error(e.statusText);return e}catch(e){console.error(e)}}async function u(){try{const e=await i();n.value=e.data;let o=[];e.data.forEach((e=>{e.datetime=new Date(e.datetime),e.datetime.getDate()===a.getDate()&&o.push(e)})),t.value=o;let r=[],u=[];for(let a=8;a<=16;a++){const e=h(a,t.value);u.push(e)}r=u;const d=t.value.filter((e=>"FINISH"===e.status)),p=t.value.filter((e=>"FINISH"!==e.status&&"SKIP"!==e.status&&"CANCEL"!==e.status));n.value.filter((e=>"ONE"===e.type)),n.value.filter((e=>"TWO"===e.type)),n.value.filter((e=>"THREE"===e.type));let f=0,v=0,m=0;for(let t=0;t<n.value.length;t++)"ONE"===n.value[t].type?f=(n.value[t].rate+f)/n.value.filter((e=>"ONE"===e.type&&"FINISH"===e.status)).length:"TWO"===n.value[t].type?v=n.value[t].rate+v/n.value.filter((e=>"TWO"===e.type&&"FINISH"===e.status)).length:"THREE"===n.value[t].type&&(m=n.value[t].rate+m/n.value.filter((e=>"THREE"===e.type&&"FINISH"===e.status)).length);let g=[],w=[],k=[];c.value.forEach((e=>{void 0!==k.includes(e.channel)&&!1!==k.includes(e.channel)||k.push(`ช่องบริการที่ ${e.channel}`)})),g=k,d.forEach((e=>{w[e.channel-1]=d.filter((t=>t.channel===e.channel)).length})),l.value=[{type:$a.Bar,title:"คะแนน เฉลี่ย ",labels:["แบบคำขอกู้ยืมเงิน","สัญญากู้ยืมเงิน","ประเภทอื่น ๆ"],datasets:[{data:[f,v,m],label:"",backgroundColor:["#191770","red","black"]}]},{type:$a.Doughnut,title:`คิวของวันนี้ ${t.value.length} คิว`,labels:["Finish","Not Finish"],datasets:[{data:[d.length,p.length],label:"",backgroundColor:["#191770","red"]}]},{type:$a.Line,title:`คิวของวันนี้ ${t.value.length} คิว`,labels:[" 08:00"," 09:00"," 10:00"," 11:00"," 12:00"," 13:00"," 14:00"," 15:00"," 16:00"],datasets:[{data:r,label:`${a.toDateString()}`,backgroundColor:["#191770"]}],chartOption:{responsive:!0,scales:{x:{title:{display:!0,text:"เวลา"}},y:{title:{display:!0,text:"ความยาวของคิว"},beginAtZero:!0}}}},{type:$a.Pie,title:"คิวที่เสร็จสิ้น",labels:g,datasets:[{data:w,label:"คิวที่สำเร็จ",backgroundColor:["#191770","red","#4175DF"]}]}],s.value=!1}catch(e){console.error(e)}}async function d(){try{const e=await S.A.get("http://localhost:8886/users/getAlluser");if(200!==e.status)throw Error(e.statusText);c.value=e.data.filter((e=>"TEACHER"===e.role))}catch(e){console.error(e)}}function h(e,t){const a=t.filter((t=>{const a=new Date(t.datetime);return a.getHours()===e}));return a.length}setInterval((()=>{u(),d()}),r);return(0,o.sV)(d),(0,o.sV)(u),(e,t)=>((0,o.uX)(),(0,o.CE)("div",cn,[(0,o.Lk)("main",rn,[!1===(0,Y.R1)(s)?((0,o.uX)(),(0,o.Wv)(ln,{key:0,"card-color":"white",data:(0,Y.R1)(l)[0]},null,8,["data"])):(0,o.Q3)("",!0),!1===(0,Y.R1)(s)?((0,o.uX)(),(0,o.Wv)(ln,{key:1,"card-color":"white",data:(0,Y.R1)(l)[1]},null,8,["data"])):(0,o.Q3)("",!0),!1===(0,Y.R1)(s)?((0,o.uX)(),(0,o.Wv)(ln,{key:2,"card-color":"white",data:(0,Y.R1)(l)[2]},null,8,["data"])):(0,o.Q3)("",!0),!1===(0,Y.R1)(s)?((0,o.uX)(),(0,o.Wv)(ln,{key:3,"card-color":"white",data:(0,Y.R1)(l)[3]},null,8,["data"])):(0,o.Q3)("",!0)])]))}});const dn=(0,i.A)(un,[["__scopeId","data-v-d6b66630"]]);var hn=dn,pn=(a(6984),a(7566),a(8721),a(266),a(2800)),fn=a(5728);const vn={class:"app"},mn={class:"flex"},gn={class:"abutton text-white"};var wn=(0,o.pM)({__name:"history",setup(e){let t=(0,Y.KR)([]),a=(0,Y.KR)(""),n=((0,Y.KR)(!1),(0,Y.KR)(null),(0,Y.IJ)());const s=(0,Y.KR)([{key:"datetime",title:"วันเวลา",align:"center"},{key:"studentid",title:"รหัสนักศึกษา",align:"center"},{key:"type",title:"งานบริการ",align:"center"},{key:"status",title:"สถานะ",align:"center"},{key:"channel",title:"ช่องบริการ",align:"center"},{key:"rate",title:"คะแนน",align:"center"}]);c();let l=(0,Y.KR)([]);async function c(){try{const e=await S.A.get("http://localhost:8886/history/getHistory");if(200!==e.status)throw Error(e.statusText);t.value=e.data,t.value.forEach((e=>{e.type=r(e.type),e.datetime=`${new Date(e.datetime).toDateString()} ${new Date(e.datetime).toTimeString().split(" ")[0]}  `})),l.value=t.value}catch(e){console.error(e)}}function r(e){switch(e){case"ONE":return"แบบคำขอกู้ยืมเงิน";case"TWO":return"สัญญากู้ยืมเงิน หรือ แบบยืนยันการเบิกเงินกู้ยืม";default:return"ประเภทอื่น ๆ"}}function i(){const e=p(h.value),t=new Blob([e],{type:"text/csv"}),a=document.createElement("a");a.href=window.URL.createObjectURL(t),a.download="data.csv",a.click()}async function u(){t.value=l.value}const d=()=>{const[e,a]=n.value;if(e&&a){const n=t.value.filter((t=>{const n=new Date(t.datetime);return n>=new Date(e)&&n<=new Date(a)}));t.value=n}else u()};let h=(0,o.EW)((()=>n.value?t.value.filter((e=>{const t=new Date(e.datetime),a=n.value;return a?.length>1?t>=new Date(a[0])&&t<=new Date(a[a?.length-1]):t.toString().split(" ")[0]===new Date(a[0]).toString().split(" ")[0]})):t.value));function p(e){const t=e.map((e=>({"วันเวลา":e.datetime,"รหัสนักศึกษา":e.studentid,"งานบริการ":e.type,"ช่องบริการ":e.channel,"คะแนน":e.rate}))),a=Object.keys(t[0]).join(","),n=e.map((e=>[e.datetime,`"${e.studentid}"`,`"${e.type}"`,`"${e.channel}"`,e.rate].join(","))).join("\n");return`${a}\n${n}`}return(e,t)=>{const l=(0,o.g2)("v-date-input");return(0,o.uX)(),(0,o.CE)("div",vn,[(0,o.Lk)("main",null,[(0,o.Lk)("div",mn,[(0,o.bF)(fn.W,{modelValue:(0,Y.R1)(a),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,Y.i9)(a)?a.value=e:a=e),label:"Search","prepend-inner-icon":"mdi-magnify",class:"",style:{color:"white"},variant:"underlined",color:"white","hide-details":"","single-line":""},null,8,["modelValue"])]),(0,o.Lk)("div",gn,[(0,o.bF)(l,{modelValue:(0,Y.R1)(n),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,Y.i9)(n)?n.value=e:n=e),label:"เลือกวันที่","max-width":"368",multiple:"range",onInput:d},null,8,["modelValue"])]),(0,o.bF)(pn.Py,{headers:s.value,items:(0,Y.R1)(h),search:(0,Y.R1)(a),class:"custom-table mr-52"},null,8,["headers","items","search"]),(0,o.bF)(k.D,{color:"red",onClick:i},{default:(0,o.k6)((()=>[(0,o.eW)("Download")])),_:1})])])}}});const kn=(0,i.A)(wn,[["__scopeId","data-v-248c828c"]]);var yn=kn;const bn=e=>((0,o.Qi)("data-v-cfef2566"),e=e(),(0,o.jt)(),e),xn={class:"w-screen main-wrapper"},Cn=bn((()=>(0,o.Lk)("div",{class:"textadmin"},"จัดการเจ้าหน้าที่ดูแลระบบ",-1))),An={class:"wrapper"},En=bn((()=>(0,o.Lk)("div",{class:"Listofnames"},"รายชื่อ",-1))),Ln={class:"Search"},Rn=bn((()=>(0,o.Lk)("h1",{class:"Listofnames mr-5"},"ค้นหา",-1))),Tn={class:"table",style:{height:"1rem"}},_n={class:"admin-table"},In=bn((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ลำดับ"),(0,o.Lk)("th",null,"ชื่อผู้ใช้"),(0,o.Lk)("th",null,"อีเมล"),(0,o.Lk)("th",null,"ช่องบริการ"),(0,o.Lk)("th",null,"การเปลี่ยนแปลง")])],-1))),Sn={key:0,class:"popup"},Dn=bn((()=>(0,o.Lk)("button",{class:"btn-green",type:"submit"},"เพิ่ม",-1)));var On=(0,o.pM)({__name:"config",setup(e){const t=(0,Y.KR)(!1),a=(0,Y.KR)({username:"",firstName:"",lastName:"",email:""});let s=(0,Y.KR)([]);async function l(){try{const e=await S.A.get("http://localhost:8886/users/getAlluser");if(200!==e.status)throw Error(e.statusText);const t=(0,Y.KR)([]);console.log(e.data),e.data.forEach((e=>{"TEACHER"===e.role&&t.value.push(e)})),s.value=t.value,console.log(s.value)}catch(e){console.error(e)}}const c=(0,Y.KR)(""),r=(0,o.EW)((()=>s.value.filter((e=>{const t=c.value.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||`${e.channel}`.includes(t)}))));async function i(e){const{value:t}=await w().fire({title:"Multiple inputs",html:'\n    <h1>อีเมล</h1>  \n    <input type="email" id="swal-input1" class="swal2-input">\n    <h1>ช่องบริการ</h1>\n    <input type="number" id="swal-input2" class="swal2-input">\n  ',focusConfirm:!1,preConfirm:async()=>{let e=[document.getElementById("swal-input1").value,document.getElementById("swal-input2").value];if(!e[0]||!e[1])return w().fire({title:"คุณต้องกรอกข้อมูลทั้งหมด",icon:"error"}),null;const t=m(parseInt(e[1])),a=v(e[0]);return!0===t?(w().fire({title:"ช่องบริการนี้มีอยู่แล้ว",icon:"error"}),null):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e[0])?!0===a?(w().fire({title:"อีเมลนี้มีอยู่แล้ว",icon:"error"}),null):e:isNaN(parseInt(e[1]))?(w().fire({title:"คุณกรอกช่องบริการไม่ถูกต้อง",icon:"error"}),null):(w().fire({title:"คุณกรอกอีเมลไม่ถูกต้อง",icon:"error"}),null)}});if(t){await u({email:t[0],channel:parseInt(t[1])});await l()}}async function u(e){try{const t=await S.A.post("http://localhost:8886/users/addTeacher",{email:e.email,channel:e.channel});if(200!==t.status)throw Error(t.statusText);return await w().fire({position:"bottom-end",icon:"success",title:"คุณเพิ่มเจ้าหน้าที่สำเร็จ",showConfirmButton:!1,timer:1500}),t.data}catch(t){console.error(t)}}const d=()=>{a.value={username:"",firstName:"",lastName:"",email:""},t.value=!1},h=async e=>{console.log(e);const{value:t}=await w().fire({title:"เปลี่ยนช่องบริการ",html:`\n    <h1>อีเมล</h1>  \n    <input type="email" placeholder="${e.email}" id="swal-input1" class="swal2-input" disabled>\n    <h1>ช่องบริการ</h1>\n    <input type="number" placeholder="ช่องบริการ ${e.channel}" id="swal-input2" class="swal2-input">\n  `,focusConfirm:!1,preConfirm:async()=>{let e=[document.getElementById("swal-input1").value,document.getElementById("swal-input2").value];if(!e[1])return w().fire({title:"คุณต้องกรอกข้อมูลทั้งหมด",icon:"error"}),null;m(parseInt(e[1])),v(e[0]);return isNaN(parseInt(e[1]))?(w().fire({title:"คุณกรอกช่องบริการไม่ถูกต้อง",icon:"error"}),null):e}});if(t){const a=await g({email:e.email,channel:parseInt(t[1])}),n=m(a.channel);if(!0===n){const a=s.value.find((e=>e.channel===parseInt(t[1])));void 0!==a&&await g({email:a.email,channel:e.channel}),await w().fire({position:"bottom-end",icon:"success",title:"คุณแก้ไขเจ้าหน้าที่สำเร็จ",showConfirmButton:!1,timer:1500})}await l()}},p=async e=>{const t=await w().fire({title:"คุณแน่ใจใช่ไหม?",text:"คุณกำลังจะนำเจ้าหน้าที่ออก!",icon:"warning",reverseButtons:!0,showCancelButton:!0,confirmButtonColor:"#191771",cancelButtonColor:"#ED1C24",confirmButtonText:"ยืนยัน!",cancelButtonText:"ยกเลิก",iconColor:"#ED1C24",color:"#191771"});t.isConfirmed&&(await f(e.email),await l())};async function f(e){console.log(e);try{const t=await S.A.put("http://localhost:8886/users/getusereditSpecificuser",{email:e,data:{channel:0,role:"STUDENT"}});if(200!==t.status)throw Error(t.statusText);return await w().fire({position:"bottom-end",icon:"success",title:"คุณแก้ไขเจ้าหน้าที่สำเร็จ",showConfirmButton:!1,timer:1500}),t.data}catch(t){console.error(t)}}function v(e){const t=s.value.find((t=>t.email===e));return void 0!==t}function m(e){const t=s.value.find((t=>t.channel===e));return void 0!==t}async function g(e){try{const t=await S.A.put("http://localhost:8886/users/getusereditSpecificuser",{email:e.email,data:{channel:e.channel}});if(200!==t.status)throw Error(t.statusText);return t.data}catch(t){console.error(t)}}return(0,o.sV)(l),(e,s)=>((0,o.uX)(),(0,o.CE)("div",xn,[Cn,(0,o.Lk)("div",An,[En,(0,o.bF)(k.D,{color:"red",onClick:i},{default:(0,o.k6)((()=>[(0,o.eW)("เพิ่มผู้ดูแล")])),_:1})]),(0,o.Lk)("div",Ln,[Rn,(0,o.bF)(fn.W,{type:"text",modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e),label:"ค้นหา..","prepend-inner-icon":"mdi-account-search-outline"},null,8,["modelValue"])]),(0,o.Lk)("div",Tn,[(0,o.Lk)("table",_n,[In,(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.value,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",null,(0,z.v_)(t+1),1),(0,o.Lk)("td",null,(0,z.v_)(e.name),1),(0,o.Lk)("td",null,(0,z.v_)(e.email),1),(0,o.Lk)("td",null,(0,z.v_)(e.channel),1),(0,o.Lk)("td",null,[(0,o.bF)(k.D,{color:"main",onClick:t=>h(e)},{default:(0,o.k6)((()=>[(0,o.eW)("แก้ไข")])),_:2},1032,["onClick"]),(0,o.bF)(k.D,{color:"red",onClick:t=>p(e)},{default:(0,o.k6)((()=>[(0,o.eW)("ลบ")])),_:2},1032,["onClick"])])])))),128))])]),t.value?((0,o.uX)(),(0,o.CE)("div",Sn,[(0,o.Lk)("form",{onSubmit:s[2]||(s[2]=(0,n.D$)(((...t)=>e.addAdmin&&e.addAdmin(...t)),["prevent"]))},[(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":s[1]||(s[1]=e=>a.value.email=e),placeholder:"อีเมล",required:""},null,512),[[n.Jo,a.value.email]]),Dn,(0,o.Lk)("button",{class:"btn-red",onClick:d},"ยกเลิก")],32)])):(0,o.Q3)("",!0)])]))}});const Fn=(0,i.A)(On,[["__scopeId","data-v-cfef2566"]]);var Bn=Fn;const qn={class:"app"},jn={class:"flex justify-center"},Kn={class:"abutton text-white"},Xn={class:"flex justify-end text-white"};var Nn=(0,o.pM)({__name:"score",setup(e){let t=(0,Y.KR)([]),a=(0,Y.KR)(""),n=(0,Y.IJ)();const s=(0,Y.KR)([{key:"datetime",title:"วันเวลา",align:"center"},{key:"type",title:"งานบริการ",align:"center"},{key:"rate",title:"คะแนน",align:"center"}]);c();let l=(0,Y.KR)([]);async function c(){try{const e=await S.A.get("http://localhost:8886/history/getHistory");if(200!==e.status)throw Error(e.statusText);console.log(e.data),t.value=e.data,t.value.forEach((e=>{e.type=r(e.type),e.datetime=`${new Date(e.datetime).toDateString()} ${new Date(e.datetime).toTimeString().split(" ")[0]}  `})),t.value=t.value.filter((e=>"FINISH"===e.status)),l.value=t.value}catch(e){console.error(e)}}function r(e){switch(e){case"ONE":return"แบบคำขอกู้ยืมเงิน";case"TWO":return"สัญญากู้ยืมเงิน หรือ แบบยืนยันการเบิกเงินกู้ยืม";default:return"ประเภทอื่น ๆ"}}function i(){const e=u(t.value),a=new Blob([e],{type:"text/csv"}),n=document.createElement("a");n.href=window.URL.createObjectURL(a),n.download="data.csv",n.click()}function u(e){const t=e.map((e=>({"วันเวลา":e.datetime,"งานบริการ":e.type,"คะแนน":e.rate}))),a=Object.keys(t[0]).join(","),n=e.map((e=>[e.datetime,`"${e.type}"`,e.rate].join(","))).join("\n");return`${a}\n${n}`}let d=(0,o.EW)((()=>{if(!n.value)return t.value;let e=t.value;return n.value&&(e=e.filter((e=>{const t=new Date(e.datetime),a=n.value;return a?.length>1?t>=new Date(a[0])&&t<=new Date(a[a?.length-1]):t.toString().split(" ")[0]===new Date(a[0]).toString().split(" ")[0]}))),e}));function h(e){switch(e){case"ALL":t.value=l.value;break;default:t.value=l.value.filter((t=>t.type===e))}}return(e,t)=>{const l=(0,o.g2)("v-date-input");return(0,o.uX)(),(0,o.CE)("div",qn,[(0,o.Lk)("main",null,[(0,o.Lk)("div",jn,[(0,o.bF)(fn.W,{modelValue:(0,Y.R1)(a),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,Y.i9)(a)?a.value=e:a=e),label:"Search","prepend-inner-icon":"mdi-magnify",class:"",style:{color:"white"},variant:"underlined",color:"white","hide-details":"","single-line":""},null,8,["modelValue"])]),(0,o.Lk)("div",Kn,[(0,o.Lk)("button",{class:"btn",onClick:t[1]||(t[1]=e=>h("ALL"))}," ทั้งหมด "),(0,o.Lk)("button",{class:"btn",onClick:t[2]||(t[2]=e=>h("แบบคำขอกู้ยืมเงิน"))}," แบบคำขอกู้ยืมเงิน "),(0,o.Lk)("button",{class:"btn",onClick:t[3]||(t[3]=e=>h("สัญญากู้ยืมเงิน หรือ แบบยืนยันการเบิกเงินกู้ยืม"))}," สัญญากู้ยืมเงิน "),(0,o.Lk)("button",{class:"btn",onClick:t[4]||(t[4]=e=>h("ประเภทอื่น ๆ"))}," ประเภทอื่น ๆ ")]),(0,o.Lk)("div",Xn,[(0,o.bF)(l,{modelValue:(0,Y.R1)(n),"onUpdate:modelValue":t[5]||(t[5]=e=>(0,Y.i9)(n)?n.value=e:n=e),label:"เลือกวันที่","max-width":"368",multiple:"range",onInput:e.filterByDateRange,style:{color:"white"}},null,8,["modelValue","onInput"])]),(0,o.bF)(pn.Py,{headers:s.value,items:(0,Y.R1)(d),search:(0,Y.R1)(a),class:"custom-table"},null,8,["headers","items","search"]),(0,o.bF)(k.D,{color:"red",onClick:i},{default:(0,o.k6)((()=>[(0,o.eW)("Download")])),_:1})])])}}});const Pn=(0,i.A)(Nn,[["__scopeId","data-v-a383e70a"]]);var Qn=Pn;const{cookies:Wn}=(0,m.lT)(),Hn=[{path:"/",name:"root",component:J},{path:"/student",name:"student",component:Q},{path:"/student/main",name:"studentmain",component:Fa},{path:"/student/statisfaction",name:"studentstatisfaction",component:Ja},{path:"/admin",name:"admin",component:Me,children:[{path:"/admin/home",name:"adminhome",component:hn},{path:"/admin/history",name:"adminhistory",component:yn},{path:"/admin/config",name:"adminconfig",component:Bn},{path:"/admin/score",name:"adminscore",component:Qn}]},{path:"/teacher",name:"teacher",component:St,children:[{path:"/teacher/home",name:"teacherhome",component:Vt},{path:"/teacher/dashboard",name:"teacherdashboard",component:ia}]}],Mn=(0,h.aE)({history:(0,h.LA)("/"),routes:Hn});function Un(e){var t=e.split(".")[1],a=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}async function Vn(e){try{const t=await S.A.post("http://localhost:8886/login/refresh",null,{headers:{Authorization:`Bearer ${e}`}});if(200!==t.status)throw Error(t.statusText);const a=t.data;Wn.remove("accesstoken"),Wn.remove("refreshtoken"),Wn.set("accesstoken",a.access_token),Wn.set("refreshtoken",a.refresh_token)}catch(t){console.error(t)}}async function Gn(){const e=Wn.get("accesstoken"),t=Wn.get("refreshtoken");if(void 0===e||null===e||void 0===Vn||null===Vn)return!1;const a=Un(e);return!(a.exp<Date.now()/1e3)||(console.log("expried"),await Vn(t),!1)}async function $n(){const e=Wn.get("accesstoken"),t=Un(e),a=t.email.split("@")[0];try{const e=await S.A.get(`http://localhost:8886/queue/getQueueSpecific?studentID=${a}`);if(200!==e.status)throw Error(e.statusText);return!(null===e.data||void 0===e.data||e.data.length<1)}catch(n){console.error(n)}}function Jn(e){const t=Wn.get("accesstoken"),a=Un(t);return a.role===e}Mn.beforeEach((async(e,t,a)=>{console.log("isAuthen",await Gn());const n=await Gn();"root"!==e.name&&!1===n?(console.log("unauthenticated"),a({name:"root"})):n&&(console.log("authenticated"),"admin"===e.name&&!1===Jn("ADMIN")?(console.log("you aren't admin"),Wn.remove("accesstoken"),Wn.remove("refreshtoken"),console.log("GET OUT!"),a({name:"root"})):"teacher"===e.name&&!1===Jn("TEACHER")?(console.log("you aren't teacher"),a({name:"root"})):!0===await $n()&&"studentmain"!==e.name&&"studentstatisfaction"!==e.name?(console.log("you reserved"),a({name:"studentmain"})):("studentmain"===e.name&&!1===await $n()||"studentstatisfaction"===e.name&&!1===await $n())&&(console.log("you aren't reserve"),a({name:"student"}))),console.log("unauthenticated"),a()}));var Yn=Mn,zn=a(782),Zn=(0,zn.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}}),eo=(a(3143),a(7768)),to=a(1964),ao=a(5891),no=(0,eo.$N)({theme:{themes:{light:{dark:!1,colors:{primary:ao.Ay.red.darken1,secondary:ao.Ay.red.lighten4,main:"#191770"}}}},components:{VDateInput:to.B}});async function oo(){const e=await a.e(53).then(a.t.bind(a,8874,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}var so=a(9473);oo(),(0,n.Ef)(d).use(Yn).use(Zn).use(no).component("VueDatePicker",so.A).mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,s){if(!n){var l=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],s=e[u][2];for(var c=!0,r=0;r<n.length;r++)(!1&s||l>=s)&&Object.keys(a.O).every((function(e){return a.O[e](n[r])}))?n.splice(r--,1):(c=!1,s<l&&(l=s));if(c){e.splice(u--,1);var i=o();void 0!==i&&(t=i)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,o,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var s=Object.create(null);a.r(s);var l={};e=e||[null,t({}),t([]),t(t)];for(var c=2&o&&n;"object"==typeof c&&!~e.indexOf(c);c=t(c))Object.getOwnPropertyNames(c).forEach((function(e){l[e]=function(){return n[e]}}));return l["default"]=function(){return n},a.d(s,l),s}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/webfontloader.0b2ba6df.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="dsl-queue-vue-2:";a.l=function(n,o,s,l){if(e[n])e[n].push(o);else{var c,r;if(void 0!==s)for(var i=document.getElementsByTagName("script"),u=0;u<i.length;u++){var d=i[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+s){c=d;break}}c||(r=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.setAttribute("data-webpack",t+s),c.src=n),e[n]=[o];var h=function(t,a){c.onerror=c.onload=null,clearTimeout(p);var o=e[n];if(delete e[n],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=h.bind(null,c.onerror),c.onload=h.bind(null,c.onload),r&&document.head.appendChild(c)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.f.j=function(t,n){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var s=new Promise((function(a,n){o=e[t]=[a,n]}));n.push(o[2]=s);var l=a.p+a.u(t),c=new Error,r=function(n){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var s=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;c.message="Loading chunk "+t+" failed.\n("+s+": "+l+")",c.name="ChunkLoadError",c.type=s,c.request=l,o[1](c)}};a.l(l,r,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,s,l=n[0],c=n[1],r=n[2],i=0;if(l.some((function(t){return 0!==e[t]}))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(r)var u=r(a)}for(t&&t(n);i<l.length;i++)s=l[i],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(u)},n=self["webpackChunkdsl_queue_vue_2"]=self["webpackChunkdsl_queue_vue_2"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(8635)}));n=a.O(n)})();
//# sourceMappingURL=app.61f0c902.js.map